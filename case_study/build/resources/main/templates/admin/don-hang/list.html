<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Danh sách Đơn hàng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>Danh sách Đơn hàng</h1>

    <div class="mb-3">
        <a href="#" class="btn btn-primary">Thêm mới</a>
    </div>

    <table class="table table-bordered table-striped table-hover">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Mã đơn hàng</th>
            <th>Khách hàng</th>
            <th>Ngày đặt</th>
            <th>Tổng tiền</th>
            <th>Trạng thái</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="dh : ${donHangs}">
            <td th:text="${dh.idDonHang}"></td>
            <td th:text="${dh.maDonHang}"></td>
            <td th:text="${dh.khachHang != null ? dh.khachHang.hoTen : 'Chưa có thông tin'}"></td>
            <td>
                <span th:if="${dh.ngayDatHang != null}"
                      th:text="${#temporals.format(dh.ngayDatHang.toLocalDateTime(), 'dd/MM/yyyy HH:mm')}"></span>
                <span th:unless="${dh.ngayDatHang != null}" class="text-muted">Chưa có ngày</span>
            </td>
            <td th:text="${#numbers.formatCurrency(dh.tongThanhToan)}"></td>
            <td>
                <span th:class="${dh.trangThaiDonHang == 'Da_giao' ? 'badge bg-success' :
                                dh.trangThaiDonHang == 'Cho_xac_nhan' ? 'badge bg-warning' :
                                dh.trangThaiDonHang == 'Da_huy' ? 'badge bg-danger' : 'badge bg-info'}"
                      th:text="${dh.trangThaiDonHang}"></span>
            </td>
            <td>
                <a th:href="@{/admin/don-hang/chi-tiet/{id}(id=${dh.idDonHang})}"
                   class="btn btn-info btn-sm">Chi tiết</a>
                <a th:href="@{/admin/don-hang/delete/{id}(id=${dh.idDonHang})}"
                   class="btn btn-danger btn-sm"
                   onclick="return confirm('Bạn có chắc muốn xóa đơn hàng này?')">Xóa</a>
            </td>
        </tr>
        </tbody>
    </table>

    <div th:if="${donHangs.size() == 0}" class="alert alert-info text-center">
        Chưa có đơn hàng nào
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>